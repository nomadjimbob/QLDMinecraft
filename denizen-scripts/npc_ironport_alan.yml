npc_ironport_alan:
  type: assignment
  actions:
    on assignment:
      - trigger name:click state:true
      - trigger name:chat state:true
      - trigger name:proximity state:true
  interact scripts:
  - npc_ironport_alan_interact

npc_ironport_alan_interact:
  type: interact
  steps:
    1:
      proximity trigger:
        entry:
          script:
            - if <yaml[<player.uuid>].read[npc_alan.tutorialdone]> != 1:
              - narrate format:npcchat "Howdy <player.name>"
              - wait
              - narrate ""
              - narrate format:npcchat "Since you are new here, there are a few things I"
              - narrate format:npcchat "need to tell you"
              - wait 5
              - narrate ""
              - narrate format:npcchat "Be nice to other players, unless you are in a PVP"
              - narrate format:npcchat "area - then good luck!"
              - wait 5
              - narrate ""
              - narrate format:npcchat "If you are in a creative area, don't destroy other"
              - narrate format:npcchat "players creations. There is plenty of space!"
              - wait 5
              - narrate ""
              - narrate format:npcchat "If you get lost or stuck, log out and log back in."
              - narrate format:npcchat "You will spawn back at Ironport"
              - wait 5
              - narrate ""
              - narrate format:npcchat "NPCs are out and about. Some will help you, some"
              - narrate format:npcchat "wont. Others will give you quests which have rewards"
              - wait 5
              - narrate ""
              - narrate format:npcchat "Finally, when using chat, no swearing and stay in"
              - narrate format:npcchat "your Minecraft character."
              - wait 5
              - narrate ""
              - narrate format:npcchat "DONT SHARE YOUR REAL NAME OR ADDRESS WITH ANYONE!"
              - wait 5
              - narrate ""
              - narrate format:npcchat "If you understand these rules, right click on me!"
            - else:
              - random:
                - narrate format:npcchat "Howdy"
                - narrate format:npcchat "The fish are not biting today"
                - narrate format:npcchat "I have no more money for you"
                - narrate format:npcchat "Have you talked to Shopkeeper Pete?"
                - repeat 1:
                  - narrate format:npcchat "I hear some building noises down the well out there"
                  - narrate format:npcchat "wonder what they are doing down there"
      click trigger:
          script:
          - if <yaml[<player.uuid>].read[npc_alan.tutorialdone]> != 1:
            - narrate ""
            - narrate format:npcchat "Awesome!"
            - wait
            - narrate ""
            - yaml id:<player.uuid> set chatenabled:1
            - narrate format:serverchat "Chat has been enabled for you"
            - narrate ""
            - wait
            - narrate format:npcchat "You can also buy and sell items at some places for"
            - narrate format:npcchat "coins. You can do quests to earn more coins and"
            - narrate format:npcchat "even trade coins using the /givecoin <&lt>player<&gt>"
            - narrate format:npcchat "command"
            - wait 8
            - narrate ""
            - money give quantity:20
            - narrate "<&e> Alan gave you 20 coins"
            - narrate ""
            - narrate format:npcchat "Here is 20 coins to get you started. If you want to"
            - narrate format:npcchat "check how many coins you have, use the /coin command"
            - narrate ""
            - narrate format:npcchat "Ill see you around"
            - yaml id:<player.uuid> set npc_alan.tutorialdone:1